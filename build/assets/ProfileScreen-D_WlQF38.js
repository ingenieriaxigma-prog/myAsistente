import{c as E,u as Y,r as i,p as w,j as e,h as Z,F as J,d as ne,S as q,U as X,q as ie,G as oe,t as ce}from"./index-CKOHEspy.js";import{B as V}from"./BackButton-BxVvuakz.js";import{L as B,D as de,a as xe,C as me,M as K,g as he}from"./pdfGenerator-BWuW8Nor.js";import{C as ee}from"./calendar-CIaxhbkj.js";import{T as ge}from"./trash-2-FWDW7VKX.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],pe=E("camera",ue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ye=E("chevron-right",fe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],be=E("log-out",je);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ve=E("save",Ne);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ke=E("users",we);function Ce({specialty:$,sessionToken:d,onViewTreatmentPlan:_}){const p=Y($),[f,g]=i.useState([]),[z,a]=i.useState(!0),[y,j]=i.useState(null),[k,b]=i.useState(null),[o,h]=i.useState(!1),[x,N]=i.useState(null),[R,C]=i.useState(!1),[G,u]=i.useState(!1);i.useEffect(()=>{d?D():(a(!1),j("No hay sesiÃ³n activa"))},[d]);const D=async()=>{if(!d){console.error("No session token available"),j("No hay sesiÃ³n activa"),a(!1);return}try{a(!0),j(null),console.log("ðŸ“¥ Loading diagnosis history...");const s=await fetch(`https://${w}.supabase.co/functions/v1/make-server-baa51d6b/diagnosis/history`,{method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}}),r=await s.json();if(console.log("ðŸ“¥ Response:",r),!s.ok)throw new Error(r.error||"Failed to load diagnosis history");const m=(r.history||[]).map(t=>({id:t.id,createdAt:t.created_at,urgencyLevel:t.urgency_level,diagnosesCount:t.possible_diagnoses?.length||0,symptomsCount:t.symptoms?.length||0,specialty:t.specialty==="MyPelvic"?"pelvic":"colop",summary:t.summary||t.urgency_description||"Sin descripciÃ³n"}));g(m)}catch(s){console.error("âŒ Error loading diagnosis history:",s),j(s.message)}finally{a(!1)}},M=s=>{switch(s){case"urgent":return"bg-red-100 text-red-700 border-red-200";case"moderate":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"mild":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},F=s=>{switch(s){case"urgent":return"Urgente";case"moderate":return"Moderado";case"mild":return"Leve";default:return s}},v=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=(s,r)=>{s.stopPropagation(),N(r),h(!0)},L=async()=>{if(!(!x||!d))try{C(!0);const s=await fetch(`https://${w}.supabase.co/functions/v1/make-server-baa51d6b/diagnosis/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!s.ok){const r=await s.json();throw new Error(r.error||"Failed to delete diagnosis")}g(r=>r.filter(m=>m.id!==x)),h(!1),N(null)}catch(s){console.error("âŒ Error deleting diagnosis:",s),alert("Error al eliminar el diagnÃ³stico")}finally{C(!1)}},I=()=>{h(!1),N(null)},U=async(s,r)=>{if(s.stopPropagation(),!d){alert("No hay sesiÃ³n activa");return}try{u(!0),console.log("ðŸ“¥ Fetching full diagnosis details for PDF generation...");const m=await fetch(`https://${w}.supabase.co/functions/v1/make-server-baa51d6b/diagnosis/${r.id}`,{method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!m.ok){const A=await m.json();throw new Error(A.error||"Failed to fetch diagnosis details")}const{diagnosis:t}=await m.json();if(console.log("âœ… Full diagnosis details retrieved:",t),console.log("ðŸ“‹ Patient data from DB:",t.patient_data),!t.patient_data)throw new Error("No se encontraron datos del paciente en el diagnÃ³stico guardado");const P={specialty:t.specialty,patientData:{gender:t.patient_data.gender,ageRange:t.patient_data.ageRange||t.patient_data.age_range},symptoms:t.symptoms||[],diagnosisResult:{urgencyLevel:t.urgency_level,urgencyTitle:t.urgency_title,urgencyDescription:t.urgency_description,urgencyTimeframe:t.urgency_timeframe,summary:t.summary,possibleDiagnoses:t.possible_diagnoses||[],redFlags:t.red_flags||[],recommendations:t.recommendations||{immediate:[],lifestyle:[],monitoring:[]},nextSteps:t.next_steps||[]},urgencyTitle:t.urgency_title,urgencyDescription:t.urgency_description,urgencyTimeframe:t.urgency_timeframe};console.log("ðŸ“‹ Transformed PDF data:",P),console.log("ðŸ“„ Generating PDF..."),await he(P),console.log("âœ… PDF generated successfully"),setTimeout(()=>{u(!1)},500)}catch(m){console.error("âŒ Error generating PDF:",m),u(!1),alert("Error al generar el PDF del diagnÃ³stico")}};return z?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(B,{className:"w-8 h-8 text-gray-400 animate-spin mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando historial..."})]}):y?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-800 mb-1",children:"Error al cargar el historial"}),e.jsx("p",{className:"text-xs text-red-600",children:y}),e.jsx("button",{onClick:D,className:"mt-2 text-xs text-red-700 underline hover:text-red-800",children:"Reintentar"})]})]})}):f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:`w-16 h-16 ${p.lightBg} rounded-full flex items-center justify-center mb-4`,children:e.jsx(J,{className:`w-8 h-8 ${p.textPrimary}`})}),e.jsx("h3",{className:"text-gray-900 mb-2",children:"No hay diagnÃ³sticos guardados"}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-xs",children:"Completa tu primer diagnÃ³stico inteligente para ver tu historial mÃ©dico aquÃ­"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:"Historial de DiagnÃ³sticos"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[f.length," ",f.length===1?"registro":"registros"]})]}),f.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>b(s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 ${p.lightBg} rounded-xl flex items-center justify-center flex-shrink-0`,children:e.jsx(J,{className:`w-5 h-5 ${p.textPrimary}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs border ${M(s.urgencyLevel)}`,children:F(s.urgencyLevel)}),e.jsx("span",{className:"text-xs text-gray-500",children:s.specialty==="pelvic"?"MyPelvic":"MyColop"})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:s.summary})]})]}),e.jsx(ye,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-3.5 h-3.5"}),v(s.createdAt)]})}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-600",children:[e.jsxs("span",{children:[s.diagnosesCount," diagnÃ³stico",s.diagnosesCount!==1?"s":""]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s.symptomsCount," sÃ­ntoma",s.symptomsCount!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-600",children:[e.jsxs("button",{onClick:r=>U(r,s),className:"flex items-center gap-1 text-gray-500 hover:text-gray-700",children:[e.jsx(de,{className:"w-4 h-4"}),"Descargar PDF"]}),e.jsxs("button",{onClick:r=>T(r,s.id),className:"flex items-center gap-1 text-gray-500 hover:text-gray-700",children:[e.jsx(ge,{className:"w-4 h-4"}),"Eliminar"]}),_&&e.jsxs("button",{onClick:()=>_(s.id),className:"flex items-center gap-1 text-gray-500 hover:text-gray-700",children:[e.jsx(xe,{className:"w-4 h-4"}),"Ver Plan de Entrenamiento"]})]})]},s.id)),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>b(null),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-xl mb-4",children:"Detalles del DiagnÃ³stico"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Funcionalidad de detalles completos prÃ³ximamente..."}),e.jsx("button",{onClick:()=>b(null),className:"w-full py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Cerrar"})]})}),o&&e.jsx(me,{title:"Eliminar DiagnÃ³stico",message:"Â¿EstÃ¡s seguro de que quieres eliminar este diagnÃ³stico?",onConfirm:L,onCancel:I,loading:R,confirmText:"Eliminar",cancelText:"Cancelar",confirmButtonColor:"red"}),G&&e.jsx(K,{type:"info",title:"Generando PDF del diagnÃ³stico guardado...",onClose:null})]})}const De="ingenieriaxigma@gmail.com";function Me({specialty:$,onBack:d,onLogout:_,onOpenAdmin:p,initialTab:f="profile",sessionToken:g,onViewTreatmentPlan:z}){const a=Y($),{session:y,user:j}=ne(),[k,b]=i.useState(f),[o,h]=i.useState({name:"",email:"",birthDate:"",gender:"",photoUrl:""}),[x,N]=i.useState(!1),[R,C]=i.useState(!1),[G,u]=i.useState(!0),[D,M]=i.useState(!1),[F,v]=i.useState(null),[T,L]=i.useState(!1),[I,U]=i.useState(!1),[s,r]=i.useState(!1),[m,t]=i.useState("");i.useEffect(()=>{(()=>{const n=j?.email||localStorage.getItem("user_email");n===De?(C(!0),console.log("âœ… Super admin detected:",n)):(C(!1),console.log("ðŸ‘¤ Regular user:",n))})(),P()},[]);const P=async()=>{const l=g||y?.access_token;if(!l){console.error("No session token available"),v("No hay sesiÃ³n activa"),u(!1);return}try{u(!0),v(null),console.log("ðŸ“¥ Loading profile...");const n=await fetch(`https://${w}.supabase.co/functions/v1/make-server-baa51d6b/profile`,{method:"GET",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}}),c=await n.json();if(console.log("ðŸ“¥ Profile response:",c),!n.ok)throw new Error(c.error||"Failed to load profile");h(c.profile),console.log("âœ… Profile loaded successfully")}catch(n){console.error("âŒ Error loading profile:",n),v(n.message)}finally{u(!1)}},A=async()=>{const l=g||y?.access_token;if(!l){r(!0),t("No hay sesiÃ³n activa");return}try{M(!0),v(null),console.log("ðŸ’¾ Saving profile...");const n=await fetch(`https://${w}.supabase.co/functions/v1/make-server-baa51d6b/profile`,{method:"PUT",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({name:o.name,birthDate:o.birthDate,gender:o.gender,photoUrl:o.photoUrl})}),c=await n.json();if(console.log("ðŸ’¾ Save response:",c),!n.ok)throw new Error(c.error||"Failed to save profile");h(c.profile),N(!1),U(!0),t("âœ… Perfil actualizado correctamente"),console.log("âœ… Profile saved successfully")}catch(n){console.error("âŒ Error saving profile:",n),r(!0),t(`âŒ Error al guardar el perfil: ${n.message}`)}finally{M(!1)}},se=()=>{const l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async n=>{const c=n.target.files?.[0];if(!c)return;if(c.size>5*1024*1024){r(!0),t("La imagen es demasiado grande. El tamaÃ±o mÃ¡ximo es 5MB.");return}const W=g||y?.access_token;if(!W){r(!0),t("No hay sesiÃ³n activa");return}try{L(!0);const S=new FileReader;S.onload=async ae=>{const re=ae.target?.result;console.log("ðŸ“¸ Uploading photo...");const Q=await fetch(`https://${w}.supabase.co/functions/v1/make-server-baa51d6b/profile/upload-photo`,{method:"POST",headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json"},body:JSON.stringify({photoBase64:re,fileName:c.name})}),O=await Q.json();if(console.log("ðŸ“¸ Upload response:",O),!Q.ok)throw new Error(O.error||"Failed to upload photo");h(le=>({...le,photoUrl:O.photoUrl})),console.log("âœ… Photo uploaded successfully"),x||await A()},S.readAsDataURL(c)}catch(S){console.error("âŒ Error uploading photo:",S),r(!0),t(`Error al subir la foto: ${S.message}`)}finally{L(!1)}},l.click()},te=l=>l?l.split(" ").map(n=>n[0]).join("").toUpperCase().substring(0,2):"?",H=(l,n)=>{h(c=>({...c,[l]:n}))};return G?e.jsxs(q,{children:[e.jsx("div",{className:`sticky top-0 z-10 bg-gradient-to-r ${a.gradient} p-6 text-white flex-shrink-0`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{onClick:d,variant:"light"}),e.jsx("h1",{className:"text-xl",children:"Mi Perfil"}),e.jsx("div",{className:"w-10"})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"w-8 h-8 text-gray-400 animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando perfil..."})]})})]}):F&&!o.email?e.jsxs(q,{children:[e.jsx("div",{className:`sticky top-0 z-10 bg-gradient-to-r ${a.gradient} p-6 text-white flex-shrink-0`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{onClick:d,variant:"light"}),e.jsx("h1",{className:"text-xl",children:"Mi Perfil"}),e.jsx("div",{className:"w-10"})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 max-w-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-800 mb-2",children:"Error al cargar el perfil"}),e.jsx("p",{className:"text-xs text-red-600 mb-3",children:F}),e.jsx("button",{onClick:P,className:"text-xs text-red-700 underline hover:text-red-800",children:"Reintentar"})]})]})})})]}):e.jsxs(q,{children:[e.jsxs("div",{className:`sticky top-0 z-10 bg-gradient-to-r ${a.gradient} p-6 text-white flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(V,{onClick:d,variant:"light"}),e.jsx("h1",{className:"text-xl",children:"Mi Perfil"}),e.jsx("div",{className:"w-10"})," "]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center text-3xl overflow-hidden",children:T?e.jsx(B,{className:"w-8 h-8 animate-spin"}):o.photoUrl?e.jsx("img",{src:o.photoUrl,alt:"Perfil",className:"w-full h-full object-cover"}):e.jsx("span",{children:te(o.name)})}),e.jsx("button",{onClick:se,disabled:T,className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(pe,{className:`w-4 h-4 ${a.textPrimary}`})})]}),e.jsx("h2",{className:"text-xl mt-4",children:o.name||"Usuario"}),e.jsx("p",{className:"text-white/80 text-sm",children:o.email})]})]}),e.jsx("div",{className:"bg-white border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>b("profile"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 transition-colors relative ${k==="profile"?`${a.textPrimary} border-b-2 ${a.borderColor}`:"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Perfil"})]}),e.jsxs("button",{onClick:()=>b("history"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 transition-colors relative ${k==="history"?`${a.textPrimary} border-b-2 ${a.borderColor}`:"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Historial"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:k==="profile"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx("button",{onClick:()=>N(!x),className:`px-4 py-2 rounded-xl text-sm transition-colors ${x?"bg-gray-200 text-gray-700":`${a.lightBg} ${a.textPrimary}`}`,children:x?"Cancelar":"Editar perfil"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 ${a.lightBg} rounded-xl flex items-center justify-center`,children:e.jsx(X,{className:`w-5 h-5 ${a.textPrimary}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Nombre completo"}),x?e.jsx("input",{type:"text",value:o.name,onChange:l=>H("name",l.target.value),placeholder:"Ingresa tu nombre completo",className:"w-full text-sm text-gray-900 bg-white rounded-lg px-3 py-2 border-2 border-gray-200 focus:border-blue-500 focus:outline-none"}):e.jsx("p",{className:"text-sm text-gray-900",children:o.name||"No especificado"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 ${a.lightBg} rounded-xl flex items-center justify-center`,children:e.jsx(ie,{className:`w-5 h-5 ${a.textPrimary}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Correo electrÃ³nico"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.email}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"El correo no puede ser modificado"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 ${a.lightBg} rounded-xl flex items-center justify-center`,children:e.jsx(ee,{className:`w-5 h-5 ${a.textPrimary}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Fecha de nacimiento"}),x?e.jsx("input",{type:"date",value:o.birthDate,onChange:l=>H("birthDate",l.target.value),className:"w-full text-sm text-gray-900 bg-white rounded-lg px-3 py-2 border-2 border-gray-200 focus:border-blue-500 focus:outline-none"}):e.jsx("p",{className:"text-sm text-gray-900",children:o.birthDate?new Date(o.birthDate).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"No especificado"})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-10 h-10 ${a.lightBg} rounded-xl flex items-center justify-center`,children:e.jsx(ke,{className:`w-5 h-5 ${a.textPrimary}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"GÃ©nero"}),x?e.jsxs("select",{value:o.gender,onChange:l=>H("gender",l.target.value),className:"w-full text-sm text-gray-900 bg-white rounded-lg px-3 py-2 border-2 border-gray-200 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Selecciona tu gÃ©nero"}),e.jsx("option",{value:"Masculino",children:"Masculino"}),e.jsx("option",{value:"Femenino",children:"Femenino"}),e.jsx("option",{value:"TransgÃ©nero",children:"TransgÃ©nero"}),e.jsx("option",{value:"Otro",children:"Otro"}),e.jsx("option",{value:"Prefiero no decir",children:"Prefiero no decir"})]}):e.jsx("p",{className:"text-sm text-gray-900",children:o.gender||"No especificado"})]})]})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Privacidad:"})," Tu informaciÃ³n personal estÃ¡ protegida y nunca serÃ¡ compartida con terceros sin tu consentimiento explÃ­cito."]})})]}):e.jsx(Ce,{specialty:$,sessionToken:g,onViewTreatmentPlan:z})}),e.jsxs("div",{className:"p-4 bg-white border-t border-gray-200 space-y-2 flex-shrink-0",children:[x&&e.jsx(oe,{gradient:a.gradient,onClick:A,fullWidth:!0,size:"lg",disabled:D,children:D?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-5 h-5 mr-2 animate-spin"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-5 h-5 mr-2"}),"Guardar cambios"]})}),e.jsxs("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 px-6 py-3 border-2 border-red-300 text-red-600 rounded-xl hover:bg-red-50 transition-colors",children:[e.jsx(be,{className:"w-5 h-5"}),"Cerrar sesiÃ³n"]}),R&&e.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 px-6 py-3 border-2 border-blue-300 text-blue-600 rounded-xl hover:bg-blue-50 transition-colors",children:[e.jsx(ce,{className:"w-5 h-5"}),"Administrar"]})]}),I&&e.jsx(K,{type:"success",title:"Perfil actualizado correctamente",message:"Tus cambios se han guardado exitosamente",onClose:()=>U(!1),buttonText:"OK"}),s&&e.jsx(K,{type:"error",title:"Error al guardar",message:m.replace("âŒ Error al guardar el perfil: ",""),onClose:()=>r(!1),buttonText:"OK"})]})}export{Me as ProfileScreen};
