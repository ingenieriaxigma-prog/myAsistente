import{c as f,r as y,j as e,h as E,u as G,S as _,k as I,m as C,F as U,G as k}from"./index-CKOHEspy.js";import{C as H}from"./circle-check-6bmBS9Y8.js";import{D as W,a as A,M as K,C as O,g as V}from"./pdfGenerator-BWuW8Nor.js";import{H as J,T as Q}from"./trending-up-DwCRwp1i.js";import{B as X,A as Y}from"./brain-23wKsOr2.js";import{C as Z}from"./calendar-CIaxhbkj.js";import{R}from"./refresh-cw-96AACFWb.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],se=f("arrow-right",ee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],S=f("stethoscope",ae);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],D=f("triangle-alert",re),j=y.memo(function({icon:n,title:o,description:a,priority:t,onClick:c,variant:d="default"}){const m={high:"border-red-200 bg-red-50",medium:"border-orange-200 bg-orange-50",low:"border-blue-200 bg-blue-50"},x={high:"bg-red-100 text-red-700 border-red-300",medium:"bg-orange-100 text-orange-700 border-orange-300",low:"bg-blue-100 text-blue-700 border-blue-300"},h={high:"Alta prioridad",medium:"Prioridad media",low:"Baja prioridad"},i=t?m[t]:"border-gray-200 bg-white",p=d==="compact"?"p-3":"p-4";return e.jsx("div",{className:`${i} border-2 rounded-xl ${p} transition-all duration-200 ${c?"cursor-pointer hover:shadow-md hover:scale-[1.02]":""}`,onClick:c,children:e.jsxs("div",{className:"flex items-start gap-3",children:[n&&e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(n,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-sm text-gray-900",children:o}),t&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border ${x[t]}`,children:h[t]})]}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:a})]})]})})}),te={urgent:{urgency:"urgent",title:"Atención Urgente Requerida",description:"Los síntomas que presentas requieren evaluación médica inmediata. Se han detectado señales de alarma que necesitan atención prioritaria.",timeframe:"Consulta en las próximas 24-48 horas",icon:D,bgColor:"bg-red-50",borderColor:"border-red-500",textColor:"text-red-700",iconColor:"text-red-600"},moderate:{urgency:"moderate",title:"Evaluación Médica Recomendada",description:"Tus síntomas sugieren que sería beneficioso consultar con un especialista para una evaluación detallada y manejo adecuado.",timeframe:"Consulta en los próximos 7-15 días",icon:E,bgColor:"bg-orange-50",borderColor:"border-orange-400",textColor:"text-orange-700",iconColor:"text-orange-600"},mild:{urgency:"mild",title:"Síntomas Leves Detectados",description:"Los síntomas que presentas parecen ser leves. Puedes comenzar con medidas de autocuidado y monitoreo. Si persisten, considera una evaluación médica.",timeframe:"Monitoreo y consulta si persisten después de 30 días",icon:H,bgColor:"bg-green-50",borderColor:"border-green-400",textColor:"text-green-700",iconColor:"text-green-600"}};function xe({specialty:g,patientData:n,symptoms:o,diagnosisResult:a,metadata:t,onBack:c,onBackToHome:d,onStartTreatmentPlan:m,onSaveDiagnosis:x,onResetDiagnosisFlow:h}){const i=G(g),[p,b]=y.useState(!1),[M,u]=y.useState(!1),$=a.urgencyLevel,l=te[$],N=a.urgencyTitle,v=a.urgencyDescription,w=a.urgencyTimeframe,P=async()=>{try{b(!0),await new Promise(s=>setTimeout(s,100)),await V({specialty:g,patientData:n,symptoms:o,diagnosisResult:a,urgencyTitle:N,urgencyDescription:v,urgencyTimeframe:w}),setTimeout(()=>{b(!1)},1500)}catch(s){console.error("Error generating PDF:",s),b(!1),alert("Error al generar el PDF. Por favor, intenta de nuevo.")}},F=()=>{alert("Redirigiendo a sistema de agendamiento de citas...")},T=()=>{m?m():alert("Iniciando plan de tratamiento personalizado...")},L=()=>{x?x():alert("Guardando diagnóstico...")},q=()=>{u(!0)},z=()=>{h&&h(),d(),u(!1)},B=()=>{u(!1)};return e.jsxs(_,{children:[e.jsxs("div",{className:`sticky top-0 z-10 bg-gradient-to-r ${i.gradient} p-4 text-white flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("button",{onClick:c,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center hover:bg-white/30 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:d,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center hover:bg-white/30 transition-colors",children:e.jsx(J,{className:"w-6 h-6"})})]}),e.jsx("h1",{className:"text-2xl mb-1",children:"Resultados de evaluación"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Análisis completo y plan de acción"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-5",children:[e.jsxs("div",{className:`${l.bgColor} border-2 ${l.borderColor} rounded-2xl p-5`,children:[e.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[e.jsx("div",{className:`w-14 h-14 ${l.bgColor} border-2 ${l.borderColor} rounded-2xl flex items-center justify-center flex-shrink-0`,children:e.jsx(l.icon,{className:`w-7 h-7 ${l.iconColor}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:`text-xl mb-1 ${l.textColor}`,children:N}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:v})]})]}),e.jsxs("div",{className:`flex items-center gap-2 ${l.textColor} bg-white/50 rounded-xl p-3 mt-3`,children:[e.jsx(I,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:w})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 border-2 border-gray-100",children:[e.jsxs("h3",{className:"text-base mb-3 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-blue-600"}),"Análisis Clínico con IA"]}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.summary}),t.ragUsed&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-green-700 bg-green-50 rounded-lg p-2",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsxs("span",{children:["Análisis basado en ",t.chunksFound," fuentes de nuestra base de conocimiento médico"]})]})]}),a.possibleDiagnoses&&a.possibleDiagnoses.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Posibles Diagnósticos"]}),e.jsx("div",{className:"space-y-2",children:a.possibleDiagnoses.map((s,r)=>e.jsxs("div",{className:`rounded-xl p-4 border-2 ${s.probability==="high"?"bg-orange-50 border-orange-200":s.probability==="medium"?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:s.name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.probability==="high"?"bg-orange-200 text-orange-800":s.probability==="medium"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:s.probability==="high"?"Alta probabilidad":s.probability==="medium"?"Probabilidad media":"Baja probabilidad"})]}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:s.description})]},r))})]}),a.redFlags&&a.redFlags.length>0&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4",children:[e.jsxs("h3",{className:"text-sm text-red-900 mb-2 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Señales de Alarma Detectadas"]}),e.jsx("ul",{className:"space-y-1",children:a.redFlags.map((s,r)=>e.jsxs("li",{className:"text-xs text-red-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-0.5",children:"•"}),e.jsx("span",{children:s})]},r))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 space-y-2",children:[e.jsxs("h3",{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Resumen de tu evaluación"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-500",children:"Género:"}),e.jsx("p",{className:"text-gray-900 mt-0.5",children:n.gender==="male"?"Masculino":n.gender==="female"?"Femenino":"Transgénero"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-500",children:"Edad:"}),e.jsx("p",{className:"text-gray-900 mt-0.5",children:n.ageRange})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Síntomas reportados:"}),e.jsxs("p",{className:"text-gray-900 mt-0.5",children:[o.length," síntomas"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Acciones inmediatas"]}),e.jsx("div",{className:"space-y-2",children:a.recommendations.immediate.map((s,r)=>e.jsx(j,{title:s.title,description:s.description,priority:s.priority},r))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Cambios en el estilo de vida"]}),e.jsx("div",{className:"space-y-2",children:a.recommendations.lifestyle.map((s,r)=>e.jsx(j,{title:s.title,description:s.description,variant:"compact"},r))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Monitoreo y seguimiento"]}),e.jsx("div",{className:"space-y-2",children:a.recommendations.monitoring.map((s,r)=>e.jsx(j,{title:s.title,description:s.description,variant:"compact"},r))})]}),a.nextSteps&&a.nextSteps.length>0&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-4",children:[e.jsxs("h3",{className:"text-sm text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"Próximos Pasos Recomendados"]}),e.jsx("ol",{className:"space-y-2",children:a.nextSteps.map((s,r)=>e.jsxs("li",{className:"text-xs text-blue-800 flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-blue-200 rounded-full flex items-center justify-center text-xs",children:r+1}),e.jsx("span",{className:"flex-1 pt-0.5",children:s})]},r))})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-xs text-blue-800 leading-relaxed",children:[e.jsx("strong",{children:"Aviso importante:"})," Esta evaluación es informativa y no reemplaza una consulta médica profesional. Los resultados son orientativos y basados en la información proporcionada. Siempre consulta con un profesional de la salud para un diagnóstico y tratamiento adecuado."]})})]}),e.jsxs("div",{className:"p-4 bg-white border-t border-gray-200 space-y-2 flex-shrink-0",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(k,{gradient:i.gradient,onClick:F,size:"md",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Agendar cita"]}),e.jsxs("button",{onClick:P,className:"px-4 py-2.5 border-2 border-gray-300 text-gray-700 rounded-xl text-sm hover:bg-gray-50 transition-colors flex items-center justify-center",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]})]}),e.jsx("div",{className:`bg-gradient-to-r ${i.gradient} rounded-xl p-4 text-white shadow-md`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm mb-0.5 flex items-center gap-1.5",children:"✨ Plan Personalizado de 8 Semanas"}),e.jsx("p",{className:"text-white/90 text-xs",children:"La IA creará ejercicios adaptados a tu diagnóstico y edad"})]})]})}),e.jsxs(k,{gradient:i.gradient,onClick:T,fullWidth:!0,size:"lg",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),"Iniciar plan de tratamiento"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:L,className:"px-4 py-2.5 border-2 border-gray-300 text-gray-700 rounded-xl text-sm hover:bg-gray-50 transition-colors flex items-center justify-center",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Guardar diagnóstico"]}),e.jsxs("button",{onClick:q,className:"px-4 py-2.5 border-2 border-gray-300 text-gray-700 rounded-xl text-sm hover:bg-gray-50 transition-colors flex items-center justify-center",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Nuevo diagnóstico"]})]})]}),p&&e.jsx(K,{type:"info",title:"Generando reporte PDF completo con análisis y plan de acción...",onClose:null,buttonText:"OK"}),M&&e.jsx(O,{title:"¿Iniciar un nuevo diagnóstico?",message:"Los datos actuales se perderán si no los has guardado.",onConfirm:z,onCancel:B})]})}export{xe as DiagnosisStep3};
